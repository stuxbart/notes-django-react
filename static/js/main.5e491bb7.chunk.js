(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{118:function(e,t,a){e.exports=a(249)},127:function(e,t,a){},150:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),c=a.n(o),s=a(10),l=a(6),i=a(113),u=a(12),p=a(13),m=a(15),d=a(14),h=(a(127),a(16)),E=a(11),b=(a(83),a(9)),f=a.n(b),v=a(21),g=a(114),N=a.n(g).a.create({baseURL:""}),y=function(e){return{type:"ERROR_MESSAGE",payload:e}},O=function(e){return{type:"SUCCESS_MESSAGE",payload:e}},k=function(){return function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n,r,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"START_LOADING"}),n=a().notes.page,r=a().auth.token,o={"Content-Type":"application/json",Authorization:"Token ".concat(r)},e.next=6,N.get("/api/notes/?page=".concat(n),{headers:o}).then((function(e){return t({type:"FETCH_NOTES",payload:e.data}),!0})).catch((function(e){return e.response&&t(y(e.response.data.detail)),!1}));case 6:return c=e.sent,t({type:"STOP_LOADING"}),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},j=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var a=Object(v.a)(f.a.mark((function a(n,r){var o,c,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"START_LOADING"}),o=r().auth.token,c={"Content-Type":"application/json",Authorization:"Token ".concat(o)},a.next=5,N.get("/api/notes/".concat(e,"/"),{headers:c}).then((function(e){return n({type:"FETCH_NOTE",payload:e.data}),t&&n({type:"SELECT_NOTE",payload:e.data}),!0})).catch((function(e){return console.log(e),!1}));case 5:return s=a.sent,n({type:"STOP_LOADING"}),a.abrupt("return",s);case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},w=function(){return{type:"START_EDIT_NOTE"}},C=function(e,t){return function(){var a=Object(v.a)(f.a.mark((function a(n,r){var o,c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=r().auth.token,c={"Content-Type":"application/json",Authorization:"Token ".concat(o)},a.next=4,N.patch("/api/notes/".concat(e,"/mark_done/"),{done:t},{headers:c}).then((function(e){n({type:"FETCH_NOTE",payload:e.data})})).catch((function(e){console.log(e)}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},T=function(e){return function(t,a){t({type:"SELECT_NOTE",payload:a().notes.objects[e]})}},x=function(e){return{type:"CHANGE_PAGE",payload:parseInt(e)}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"SHOW_DELETE_MODAL",payload:e}},S=function(){return r.a.createElement("div",{className:"row text-center",style:{height:"85vh"}},r.a.createElement("div",{className:"col-sm-12 my-auto"},r.a.createElement("div",{className:"spinner-grow text-primary",role:"status",style:{width:"7rem",height:"7rem"}},r.a.createElement("span",{className:"sr-only"},"Loading..."))))},A=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",rememberMe:!1},e.onButtonClick=function(t){t.preventDefault(),e.props.login(e.state.username,e.state.password,e.state.rememberMe)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return this.props.auth.isAuthenticated?r.a.createElement(E.a,{to:"/"}):this.props.loading?r.a.createElement(S,null):r.a.createElement("div",{className:"col-md-6 m-auto"},r.a.createElement("div",{className:"card card-body mt-4"},r.a.createElement("form",{className:"form"},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please sign in"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",id:"inputUsername",className:"form-control",placeholder:"Username",required:"",autoFocus:"",onChange:function(t){return e.setState({username:t.target.value})},value:this.state.username})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:"",onChange:function(t){return e.setState({password:t.target.value})},value:this.state.password})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"checkbox mb-3"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:this.state.rememberMe,onChange:function(t){return e.setState({rememberMe:t.target.value})}}),"\xa0Remember me"))),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",onClick:function(t){return e.onButtonClick(t)}},"Sign in"),r.a.createElement("p",{className:"mt-5 mb-3 text-muted"},"Don't have account? \xa0",r.a.createElement(h.b,{to:"/auth/register"},"Register")))))}}]),a}(r.a.Component),L=Object(l.b)((function(e){return{auth:e.auth,loading:e.loading}}),{fetchNotes:k,login:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var n=Object(v.a)(f.a.mark((function n(r){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"START_LOADING"}),n.next=3,N.post("/api/auth/login",{username:e,password:t}).then((function(e){r({type:"LOGIN",payload:{token:e.data.token,user:e.data.user}}),a&&localStorage.setItem("token",e.data.token)})).catch((function(e){e.response&&(r({type:"AUTH_ERROR"}),r(y("Unable to login")))}));case 3:r({type:"STOP_LOADING"});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})(A),_=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"onLogoutButtonClick",value:function(){this.props.logout()}},{key:"renderRightPanel",value:function(){var e=this;return this.props.isAuthenticated?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"navbar-text text-white mx-3"},this.props.user.username),r.a.createElement("button",{onClick:function(t){return e.onLogoutButtonClick()},className:"btn btn-primary text-white"},"Logout")):r.a.createElement("div",null,r.a.createElement(h.b,{to:"/auth/register",className:"btn btn-primary text-white"},"Register"),r.a.createElement(h.b,{to:"/auth/login",className:"btn btn-primary text-white ml-2"},"Login"))}},{key:"renderSearchBar",value:function(){return r.a.createElement("div",{className:"ml-5 mr-auto",style:{width:"100%"}},r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search",style:{width:"50%"}}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit"},"Search")))}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(h.b,{className:"navbar-brand",to:"/"},"Notes"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(h.b,{className:"nav-link",to:"/"},"Home ",r.a.createElement("span",{className:"sr-only"},"(current)"))),this.props.isAuthenticated?r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"btn btn-success text-white mx-2",to:"/create"},"New")):""),this.renderRightPanel()))}}]),a}(r.a.Component),M=Object(l.b)((function(e){return e.auth.isAuthenticated?{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}:{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(){return function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().auth.token,r={"Content-Type":"application/json",Authorization:"Token ".concat(n)},e.next=4,N.post("/api/auth/logout",{},{headers:r}).then((function(){return t({type:"LOGOUT"})})).catch((function(){return t(y("Unable to logout"))}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}})(_),R=(a(150),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){t.preventDefault(),e.props.onSelect(e.props.note.id),e.props.history.push("/notes/".concat(e.props.note.slug))},e.onEditButtonClick=function(t){t.preventDefault(),e.props.startEditNote(),e.props.selectNote(e.props.note.id),e.props.history.push("/edit/".concat(e.props.note.slug))},e.onMarkDoneButtonClick=function(t){t.preventDefault(),e.props.markDone(e.props.note.slug,!e.props.note.done)},e.onDeleteNoteButtonClick=function(t){e.props.onDelete(e.props.note)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.note.done?"lightgrey":this.props.note.color||"light",t=["light","lightgrey"].includes(e)?"text-reset":"text-white",a=new Date(this.props.note.created),n=this.props.note.title.length<30?this.props.note.title:this.props.note.title.slice(0,30)+"...",o=this.props.note.body.length<54?this.props.note.body:this.props.note.body.slice(0,50)+"...";return console.log(a.toLocaleString()),r.a.createElement("div",{key:this.props.note.id,className:"col-md-6 col-12 ".concat(this.props.note.done?"text-muted":"")},r.a.createElement("div",{className:"card my-3"},r.a.createElement("div",{className:"card-header bg-".concat(this.props.note.done?"lightgrey":this.props.note.color||"light"," ")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("button",{id:"done-".concat(this.props.note.id),className:"mark-done btn btn-".concat(e," ").concat(t),style:{boxShadow:"none"},onClick:this.onMarkDoneButtonClick},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement("button",{className:"btn btn-".concat(e," ").concat(t),style:{boxShadow:"none"},onClick:this.onEditButtonClick},r.a.createElement("i",{className:"far fa-edit"}))),r.a.createElement("div",{className:"col text-right"},r.a.createElement("button",{className:"btn btn-".concat(e," ").concat(t),style:{boxShadow:"none"},onClick:this.onDeleteNoteButtonClick},r.a.createElement("i",{className:"fas fa-times"}))))),r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"card-title"},n),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},"Created: ",a.toLocaleString()),r.a.createElement("p",{className:"card-text"},o),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("button",{onClick:this.onClick,className:"btn ".concat(this.props.note.done?"btn-secondary":"btn-info"," mr-auto")},"More ")),r.a.createElement("div",{className:"col-6 text-right",style:{fontSize:"25px"}},this.props.note.done?r.a.createElement("i",{className:"fas fa-check mr-3 text-success"}):"",this.props.note.important?r.a.createElement("i",{className:"fas fa-exclamation mr-3 text-warning"}):"")))))}}]),a}(r.a.Component)),I=Object(l.b)(null,{markDone:C,startEditNote:w,selectNote:T})(Object(E.f)(R)),G=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){e.props.changePage(t),e.props.fetchNotes(),e.props.history.push("/?page=".concat(t))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.page,n=t.count;if(n<11)return null;var o=Math.trunc(n/10)+1;return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination justify-content-center"},r.a.createElement("li",{className:"page-item ".concat(1===a?"disabled":"")},r.a.createElement("button",{onClick:function(t){return e.onClick(a-1)},className:"page-link",tabIndex:"-1","aria-disabled":1===a?"true":"false"},"Previous")),a>2?r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"page-link",onClick:function(t){return e.onClick(a-2)}},a-2)):"",1!==a?r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"page-link",onClick:function(t){return e.onClick(a-1)}},a-1)):"",r.a.createElement("li",{className:"page-item active","aria-current":"page"},r.a.createElement("button",{className:"page-link"},a,r.a.createElement("span",{className:"sr-only"},"(current)"))),a!==o?r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"page-link",onClick:function(t){return e.onClick(a+1)}},a+1)):"",a+1<o?r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"page-link",onClick:function(t){return e.onClick(a+2)}},a+2)):"",r.a.createElement("li",{className:"page-item ".concat(a===o?"disabled":"")},r.a.createElement("button",{onClick:function(t){return e.onClick(a+1)},className:"page-link",tabIndex:"-1","aria-disabled":a===o?"true":"false"},"Next"))))}}]),a}(r.a.Component),P=Object(l.b)((function(e){return{page:e.notes.page,count:e.notes.count}}),{changePage:x,fetchNotes:k})(Object(E.f)(G)),U=a(37),B=a(80),H=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onHide=function(){e.props.hideDeleteModal()},e.onDelete=function(){e.props.deleteNote(e.props.note.id),e.props.redirectTo&&e.props.history.push(e.props.redirectTo),e.props.hideDeleteModal()},e}return Object(p.a)(a,[{key:"render",value:function(){return this.props.note?r.a.createElement(U.a,{show:this.props.show,onHide:this.onHide},r.a.createElement(U.a.Header,{closeButton:!0},r.a.createElement(U.a.Title,null,"Delete Note")),r.a.createElement(U.a.Body,null,'Are you sure you want to delete "',r.a.createElement("b",null,this.props.note.title),'" ?'),r.a.createElement(U.a.Footer,null,r.a.createElement(B.a,{variant:"secondary",onClick:this.onHide},"Cancel"),r.a.createElement(B.a,{variant:"danger",onClick:this.onDelete},"Delete"))):r.a.createElement("div",null)}}]),a}(r.a.Component),F=Object(l.b)((function(e){return{show:e.modals.deleteModal.show,redirectTo:e.modals.deleteModal.redirectTo,note:e.selectedNote}}),{hideDeleteModal:function(){return{type:"HIDE_DELETE_MODAL"}},deleteNote:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(a,n){var r,o,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.token,o=n().notes.objects[e],c={"Content-Type":"application/json",Authorization:"Token ".concat(r)},t.next=5,N.delete("/api/notes/".concat(o.slug,"/"),{headers:c}).then((function(t){a({type:"DESELECT_NOTE"}),a(O("Note has been deleted")),a({type:"DELETE_NOTE",payload:e})})).catch((function(e){console.log(e)}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})(Object(E.f)(H)),z=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).selectNote=function(t){e.props.selectNote(t)},e.showDeleteNoteModal=function(t){e.props.selectNote(t.id),e.props.showDeleteModal()},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(this.props.location.search).get("page")||this.props.page;this.props.changePage(t),this.props.fetchNotes().then((function(t){t||(e.props.history.push("/?page=".concat(1)),e.props.changePage(1),e.props.fetchNotes())}))}},{key:"renderList",value:function(){var e=this;return this.props.notes.length>0?this.props.notes.map((function(t,a){return r.a.createElement(I,{key:t.id,note:t,onSelect:e.selectNote,onDelete:e.showDeleteNoteModal})})):r.a.createElement("div",{className:"col text-center",style:{top:"40vh"}},"You don't have any notes. ",r.a.createElement(h.b,{to:"/create",className:"text-success"},"Create one"))}},{key:"render",value:function(){return this.props.loading?r.a.createElement(S,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},this.renderList(),r.a.createElement(F,null)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(P,null))))}}]),a}(r.a.Component),q=Object(l.b)((function(e){return{notes:Object.values(e.notes.objects).sort((function(e,t){var a=new Date(e.created);return new Date(t.created)-a})),loading:e.loading,page:e.notes.page}}),{fetchNotes:k,selectNote:T,changePage:x,showDeleteModal:D})(z),Y={info:"info",success:"success",error:"danger"},J=Object(l.b)((function(e){return{message:e.message}}),{clearMessage:function(){return{type:"CLEAR_MESSAGE"}}})((function(e){var t=e.message,a=e.clearMessage;return t?r.a.createElement("div",{className:"alert alert-".concat(Y[t.type]," alert-dismissible")},r.a.createElement("button",{onClick:a,className:"close"},"\xd7"),t.message):null})),W=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onMarkDoneButtonClick=function(t){t.preventDefault(),e.props.markDone(e.props.note.slug,!e.props.note.done).then((function(){return e.props.selectNote(e.props.note.id)}))},e.onEditButtonClick=function(t){t.preventDefault(),e.props.startEditNote(),e.props.selectNote(e.props.note.id),e.props.history.push("/edit/".concat(e.props.note.slug))},e.showDeleteNoteModal=function(){e.props.showDeleteModal("/")},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history.location.pathname.substr(7);this.props.note||this.props.fetchNote(t).then((function(t){t?e.props.selectNote(e.props.note.id):e.props.history.push("/")}))}},{key:"renderDone",value:function(e){var t=e.done,a=e.important;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("i",{id:"done-mark",className:"fas fa-check mr-3  text-success"}):"",a?r.a.createElement("i",{className:"fas fa-exclamation mr-3 text-warning"}):"")}},{key:"render",value:function(){var e=this.props.note;return e?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10 mx-auto"},r.a.createElement("div",{className:"row mb-3 border-".concat(e.color?e.color:""),style:{borderBottom:"4px solid"}},r.a.createElement("div",{className:"col-md-9 col-12"},r.a.createElement("h1",{className:"ml-3 mt-4 mb-3"},e.title)),r.a.createElement("div",{className:"col-12 col-md-3 text-right pr-5 mt-3"},r.a.createElement("h2",{className:"mt-4 mb-3"},this.renderDone(e)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("p",{className:"ml-5 text-muted"},r.a.createElement("b",null,"Created:")," ",new Date(e.created).toLocaleString()),r.a.createElement("p",{className:"ml-5 text-muted"},r.a.createElement("b",null,"Updated:")," ",new Date(e.updated).toLocaleString())),r.a.createElement("div",{className:"col-6 text-right"},r.a.createElement("div",{className:"btn-group-vertical",role:"group","aria-label":"Basic example"},r.a.createElement("button",{onClick:this.onMarkDoneButtonClick,className:"btn btn-success mark-done"},r.a.createElement("i",{className:"far fa-check-square"})," Done"),r.a.createElement("button",{onClick:this.onEditButtonClick,className:"btn btn-info"},r.a.createElement("i",{className:"far fa-edit"}," Update")),r.a.createElement("button",{onClick:this.showDeleteNoteModal,className:"btn btn-danger"},r.a.createElement("i",{className:"fas fa-times"})," Delete")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("p",{className:"my-5"},e.body))))),r.a.createElement(F,null)):r.a.createElement(S,null)}}]),a}(r.a.Component),K=Object(l.b)((function(e){return{note:e.selectedNote}}),{fetchNote:j,markDone:C,selectNote:T,showDeleteModal:D,startEditNote:w})(W),V=a(5),Q=a(252),X=a(251),Z=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).colorOptions=[["primary","Blue"],["secondary","Grey"],["success","Green"],["danger","Red"],["warning","Yellow"],["info","Cyan"],["light","Lightgrey"],["dark","Black"]],e.renderTextInput=function(t){var a=t.input,n=t.label,o=t.meta,c=o.error?"is-invalid":"is-valid";return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,n),r.a.createElement("input",Object.assign({},a,{className:"form-control ".concat(o.touched?c:""),autoComplete:"off"})),e.renderError(o))},e.renderTextArea=function(t){var a=t.input,n=t.label,o=t.meta,c=o.error?"is-invalid":"is-valid";return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,n),r.a.createElement("textarea",Object.assign({},a,{className:"form-control ".concat(o.touched?c:""),style:{height:"290px"}})),e.renderError(o))},e.renderCheckBoxInput=function(e){var t=e.input,a=e.label;return r.a.createElement("div",{className:"form-group"},r.a.createElement("input",Object.assign({},t,{checked:t.value,type:"checkbox"})),r.a.createElement("label",null,"\xa0",a))},e.renderColorSelector=function(t){var a=t.input,n=t.label,o=e.colorOptions.map((function(e){return r.a.createElement("option",{key:e[0],value:e[0],className:"bg-".concat(e[0])},e[1])}));return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"my-1 mr-2"},n),r.a.createElement("select",Object.assign({},a,{className:"custom-select my-1 mr-sm-2"}),r.a.createElement("option",null,"Choose color..."),o))},e.onSubmit=function(t){e.props.edit?e.props.editNote(e.props.note,t).then((function(t){t&&e.props.history.push("/?page=1")})):e.props.createNote(t).then((function(t){t&&e.props.history.push("/?page=1")}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;switch(this.props.history.location.pathname.slice(0,6)){case"/edit/":var t=this.props.history.location.pathname.substr(6);this.props.note||this.props.fetchNote(t).then((function(t){t?(e.props.selectNote(e.props.note.id),e.props.startEditNote()):e.props.history.push("/")}));break;case"/creat":default:this.props.stopEditNote()}}},{key:"renderError",value:function(e){var t=e.error;return e.touched&&t?r.a.createElement("div",{className:"invalid-feedback"},t):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-11 mx-auto"},r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-9"},r.a.createElement(Q.a,{name:"title",component:this.renderTextInput,label:"Enter title:"}),r.a.createElement(Q.a,{name:"body",component:this.renderTextArea,label:"Enter note body:"})),r.a.createElement("div",{className:"col-3 pt-4"},r.a.createElement(Q.a,{name:"important",component:this.renderCheckBoxInput,label:"Important"}),r.a.createElement(Q.a,{name:"done",component:this.renderCheckBoxInput,label:"Done"}),r.a.createElement(Q.a,{name:"color",component:this.renderColorSelector,label:"Color"}),r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-8 mx-auto"},r.a.createElement("button",{type:"submit",className:"btn btn-success btn-block my-4"},this.props.edit?"Edit":"Create"))))))))}}]),a}(r.a.Component),$=Object(l.b)((function(e){var t={};return e.notes.edit&&(t=Object(V.a)({},e.selectedNote)),{edit:e.notes.edit,note:e.selectedNote,initialValues:t,enableReinitialize:!0}}),{createNote:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(a,n){var r,o,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.token,o={"Content-Type":"application/json",Authorization:"Token ".concat(r)},t.next=4,N.post("/api/notes/",e,{headers:o}).then((function(e){return a(O("Note has been created")),!0})).catch((function(e){return a(y("Server error, unable to create note")),!1}));case 4:return c=t.sent,t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},editNote:function(e,t){return function(){var a=Object(v.a)(f.a.mark((function a(n,r){var o,c,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=r().auth.token,c={"Content-Type":"application/json",Authorization:"Token ".concat(o)},a.next=4,N.patch("/api/notes/".concat(e.slug,"/"),t,{headers:c}).then((function(e){return n({type:"DESELECT_NOTE"}),n(O("Note has been edited")),n({type:"EDIT_NOTE",payload:e.data}),!0})).catch((function(e){return console.log(e),!1}));case 4:return s=a.sent,a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},fetchNote:j,startEditNote:w,stopEditNote:function(){return{type:"STOP_EDIT_NOTE"}},selectNote:T})(Object(X.a)({form:"noteCreate",validate:function(e){var t={};return e.title||(t.title="You must enter a title"),e.body||(t.body=" You must enter a body"),t}})(Z)),ee=a(33),te=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",email:"",password:"",password2:""},e.onChange=function(t){return e.setState(Object(ee.a)({},t.target.name,t.target.value))},e.onSubmit=function(){var t=Object(v.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.password!==e.state.password2){t.next=8;break}return t.next=4,e.props.register(e.state.username,e.state.email,e.state.password);case 4:t.sent&&e.props.history.push("/"),t.next=9;break;case 8:e.props.setError("Passwords didn't match");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(a,[{key:"render",value:function(){return this.props.loading?r.a.createElement(S,null):r.a.createElement("div",{className:"col-md-6 m-auto"},r.a.createElement("div",{className:"card card-body mt-4"},r.a.createElement("h2",{className:"text-center"},"Register"),r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",onChange:this.onChange,value:this.state.username})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",className:"form-control",name:"email",onChange:this.onChange,value:this.state.email})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:this.onChange,value:this.state.password})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password2",onChange:this.onChange,value:this.state.password2})),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Register"),r.a.createElement("p",{className:"mt-5 mb-3 text-muted"},"Already have an account?\xa0",r.a.createElement(h.b,{to:"/auth/login"},"Login")))))}}]),a}(r.a.Component),ae=Object(l.b)((function(e){return{loading:e.loading}}),{register:function(e,t,a){return function(){var n=Object(v.a)(f.a.mark((function n(r){var o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"START_LOADING"}),n.next=3,N.post("/api/auth/register",{username:e,email:t,password:a}).then((function(e){return r(O("Account has been created")),!0})).catch((function(e){if(e.response)return r(y("Register error")),!1}));case 3:return o=n.sent,r({type:"STOP_LOADING"}),n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setError:y})(te),ne=a(116),re=Object(l.b)((function(e){return{auth:e.auth,loading:e.loading}}))((function(e){var t=e.component,a=e.auth,n=Object(ne.a)(e,["component","auth"]);return r.a.createElement(E.b,Object.assign({},n,{render:function(e){return a.isLoading?r.a.createElement(S,null):a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(E.a,{to:"/auth/login"})}}))})),oe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.loadUser()}},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(M,null),r.a.createElement(J,null),r.a.createElement("div",{className:"container"},r.a.createElement(re,{path:"/",exact:!0,component:q}),r.a.createElement(E.b,{path:"/auth/login",exact:!0,component:L}),r.a.createElement(E.b,{path:"/auth/register",exact:!0,component:ae}),r.a.createElement(re,{path:"/notes/",component:K}),r.a.createElement(re,{path:"/create",component:$}),r.a.createElement(re,{path:"/edit/",component:$,edit:!0})))}}]),a}(r.a.Component),ce=Object(l.b)((function(e){return{loading:e.loading}}),{loadUser:function(){return function(e,t){e({type:"LOADING_USER"});var a=t().auth.token,n={"Content-Type":"application/json",Authorization:"Token ".concat(a)};N.get("/api/auth/user",{headers:n}).then((function(t){e({type:"USER_LOADED",payload:t.data})})).catch((function(t){a&&e(y("Auth error")),e({type:"AUTH_ERROR"})}))}}})(oe),se=a(253),le=a(79),ie=a.n(le),ue={objects:{},count:0,page:1,edit:!1},pe={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!0},me={deleteModal:{show:!1,redirectTo:null}},de=Object(s.c)({notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NOTES":return Object(V.a)(Object(V.a)({},e),{},{objects:ie.a.mapKeys(t.payload.results,"id"),count:t.payload.count});case"FETCH_NOTE":return Object(V.a)(Object(V.a)({},e),{},{objects:Object(V.a)(Object(V.a)({},e.objects),{},Object(ee.a)({},t.payload.id,t.payload))});case"START_EDIT_NOTE":return Object(V.a)(Object(V.a)({},e),{},{edit:!0});case"STOP_EDIT_NOTE":return Object(V.a)(Object(V.a)({},e),{},{edit:!1});case"EDIT_NOTE":return Object(V.a)(Object(V.a)({},e),{},{objects:Object(V.a)(Object(V.a)({},e.objects),{},Object(ee.a)({},t.payload.id,t.payload)),edit:!1});case"DELETE_NOTE":return Object(V.a)(Object(V.a)({},e),{},{objects:ie.a.omit(e.objects,t.payload)});case"CHANGE_PAGE":return Object(V.a)(Object(V.a)({},e),{},{page:t.payload});case"LOGOUT":return ue;default:return e}},selectedNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_NOTE":return t.payload;case"DESELECT_NOTE":case"LOGOUT":return null;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{user:t.payload.user,token:t.payload.token,isAuthenticated:!0,isLoading:!1};case"LOGOUT":return localStorage.removeItem("token"),{isAuthenticated:!1,user:null,token:null};case"LOADING_USER":return Object(V.a)(Object(V.a)({},e),{},{isLoading:!0});case"USER_LOADED":return Object(V.a)(Object(V.a)({},e),{},{isAuthenticated:!0,user:t.payload,isLoading:!1});case"AUTH_ERROR":return localStorage.removeItem("token"),{isAuthenticated:!1,user:null,token:null};default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_MESSAGE":return{type:"error",message:t.payload};case"INFO_MESSAGE":return{type:"info",message:t.payload};case"SUCCESS_MESSAGE":return{type:"success",message:t.payload};case"CLEAR_MESSAGE":return null;default:return e}},form:se.a,loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return!0;case"STOP_LOADING":return!1;default:return e}},modals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_DELETE_MODAL":return Object(V.a)(Object(V.a)({},e),{},{deleteModal:{show:!0,redirectTo:t.payload}});case"HIDE_DELETE_MODAL":return Object(V.a)(Object(V.a)({},e),{},{deleteModal:{show:!1,redirectTo:null}});default:return e}}}),he=Object(s.d)(de,Object(s.a)(i.a));c.a.render(r.a.createElement(l.a,{store:he},r.a.createElement(ce,null)),document.querySelector("#root"))},83:function(e,t,a){}},[[118,1,2]]]);
//# sourceMappingURL=main.5e491bb7.chunk.js.map